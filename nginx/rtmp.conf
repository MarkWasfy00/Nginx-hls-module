rtmp {
    server {
        listen ${RTMP_PORT};
        chunk_size 4096;
        allow publish all;

        application live {
            live on;
            record off;
        
            hls on;
            hls_path /tmp/hls;
            hls_fragment 5;
            hls_playlist_length 30;      # 30 seconds (6 chunks) - good balance of latency and buffering
            hls_continuous on;            # Keep stream continuous
            hls_cleanup on;               # Delete old fragments to save disk space
            hls_nested on;      
        }
    }
}